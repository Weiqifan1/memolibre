<div *ngIf="card">
  <div *ngIf="!showBackSide">
    <p [style.fontSize]="settings['frontSideFontSize']" [style.fontFamily]="settings['frontSideFontFamily']">
      {{ card.frontSide }}
    </p>
  </div>
  <div *ngIf="showBackSide">
    <p>
      <span *ngIf="settings['showFrontSideLabel'] === 'true'">Front Side: </span>
      <span [style.fontSize]="settings['frontSideFontSize']" [style.fontFamily]="settings['frontSideFontFamily']">
        {{ card.frontSide }}
      </span>
    </p>
    <p>
      <span *ngIf="settings['showBackSideLabel'] === 'true'">Back Side: </span>
      <span [style.fontSize]="settings['backSideFontSize']" [style.fontFamily]="settings['backSideFontFamily']">
        {{ card.backSide }}
      </span>
    </p>
    <p>
      <span *ngIf="settings['showCardNumberLabel'] === 'true'">Card Number: </span>
      <span [style.fontSize]="settings['cardNumberFontSize']">
        {{ card.cardNumber }}
      </span>
    </p>
    <p>
      <span *ngIf="settings['showCardNameLabel'] === 'true'">Card Name: </span>
      <span [style.fontSize]="settings['cardNameFontSize']">
        {{ card.cardName }}
      </span>
    </p>
    <p>
      <span *ngIf="settings['showNotableCardsLabel'] === 'true'">Notable Cards: </span>
      <span [style.fontSize]="settings['notableCardsFontSize']">
        {{ getNotableCards() }}
      </span>
    </p>
    <p>
      <span *ngIf="settings['showTagsLabel'] === 'true'">Tags: </span>
      <!-- View Mode -->
      <span *ngIf="!isEditingTags">
        <span *ngFor="let tag of card.tags; let i = index">
          <span
            (click)="openTagModal(tag)"
            style="cursor: pointer; color: blue; text-decoration: underline;"
            [style.fontSize]="settings['tagsFontSize']"
          >
            {{ tag }}
          </span>{{ i < card.tags.length - 1 ? ', ' : '' }}
        </span>
        <button mat-icon-button (click)="toggleEditTags()" style="margin-left: 10px;">
          <mat-icon>edit</mat-icon>
        </button>
      </span>
      <!-- Edit Mode -->
      <span *ngIf="isEditingTags">
        <mat-form-field>
          <mat-chip-grid #chipGrid>
            <mat-chip-row *ngFor="let tag of card.tags" (removed)="removeTag(tag)">
              {{ tag }}
              <button matChipRemove>
                <mat-icon>cancel</mat-icon>
              </button>
            </mat-chip-row>
            <input
              placeholder="New tag..."
              [matChipInputFor]="chipGrid"
              (matChipInputTokenEnd)="addTag($event)"
            >
          </mat-chip-grid>
        </mat-form-field>
        <button mat-icon-button (click)="toggleEditTags()" style="margin-left: 10px;">
          <mat-icon>done</mat-icon>
        </button>
      </span>
    </p>
    <p>
      <span *ngIf="settings['showDateOfLastReviewLabel'] === 'true'">Date of Last Review: </span>
      <span [style.fontSize]="settings['dateOfLastReviewFontSize']">
        {{ card.dateOfLastReview }}
      </span>
    </p>
    <p>
      <span *ngIf="settings['showRepetitionValueLabel'] === 'true'">Repetition Value: </span>
      <span [style.fontSize]="settings['repetitionValueFontSize']">
        {{ card.repetitionValue }}
      </span>
    </p>
    <p>
      <span *ngIf="settings['showRepetitionHistoryLabel'] === 'true'">Repetition History: </span>
      <span [style.fontSize]="settings['repetitionHistoryFontSize']">
        {{ card.repetitionHistory.join(', ') }}
      </span>
    </p>
    <p>
      <span *ngIf="settings['showPrimaryInfoLabel'] === 'true'">Primary Info: </span>
      <span [style.fontSize]="settings['primaryInfoFontSize']">
        {{ card.primaryInfo }}
      </span>
    </p>
    <p>
      <span *ngIf="settings['showSecondaryInfoLabel'] === 'true'">Secondary Info: </span>
      <span [style.fontSize]="settings['secondaryInfoFontSize']">
        {{ card.secondaryInfo }}
      </span>
    </p>
  </div>
</div>
<app-simple-tag-modal
  *ngIf="showTagModal"
  [data]="tagModalData"
  (close)="closeTagModal()"
></app-simple-tag-modal>
